var b=Object.defineProperty;var O=(s,e,t)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var y=(s,e,t)=>(O(s,typeof e!="symbol"?e+"":e,t),t);import{r as c,R as M,_,F as W,j as m,O as x}from"./index-937017e0.js";var i={},N={get exports(){return i},set exports(s){i=s}},H="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",D=H,F=D;function E(){}function T(){}T.resetWarningCache=E;var j=function(){function s(r,p,u,n,d,h){if(h!==F){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}s.isRequired=s;function e(){return s}var t={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:e,element:s,elementType:s,instanceOf:e,node:s,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:T,resetWarningCache:E};return t.PropTypes=t,t};N.exports=j();class C extends c.Component{constructor(e){super(e),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let e=!1;const t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch{}return e}eventListenerOptions(){let e=this.props.useCapture;return this.isPassiveSupported()?e={useCapture:this.props.useCapture,passive:!0}:e={passive:!1},e}setDefaultLoader(e){this.defaultLoader=e}detachMousewheelListener(){let e=window;this.props.useWindow===!1&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let e=window;this.props.useWindow===!1&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(e){const t=this.props.getScrollParent&&this.props.getScrollParent();return t??(e&&e.parentNode)}filterProps(e){return e}attachScrollListener(){const e=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!e)return;let t=window;this.props.useWindow===!1&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(e){e.deltaY===1&&!this.isPassiveSupported()&&e.preventDefault()}scrollListener(){const e=this.scrollComponent,t=window,r=this.getParentElement(e);let p;if(this.props.useWindow){const u=document.documentElement||document.body.parentNode||document.body,n=t.pageYOffset!==void 0?t.pageYOffset:u.scrollTop;this.props.isReverse?p=n:p=this.calculateOffset(e,n)}else this.props.isReverse?p=r.scrollTop:p=e.scrollHeight-r.scrollTop-r.clientHeight;p<Number(this.props.threshold)&&e&&e.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=r.scrollHeight,this.beforeScrollTop=r.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}calculateTopPosition(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}render(){const e=this.filterProps(this.props),{children:t,element:r,hasMore:p,initialLoad:u,isReverse:n,loader:d,loadMore:h,pageStart:a,ref:f,threshold:S,useCapture:g,useWindow:w,getScrollParent:R,...L}=e;L.ref=l=>{this.scrollComponent=l,f&&f(l)};const o=[t];return p&&(d?n?o.unshift(d):o.push(d):this.defaultLoader&&(n?o.unshift(this.defaultLoader):o.push(this.defaultLoader))),M.createElement(r,L,o)}}y(C,"propTypes",{children:i.node.isRequired,element:i.node,hasMore:i.bool,initialLoad:i.bool,isReverse:i.bool,loader:i.node,loadMore:i.func.isRequired,pageStart:i.number,ref:i.func,getScrollParent:i.func,threshold:i.number,useCapture:i.bool,useWindow:i.bool}),y(C,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});let P=(s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const k=c.lazy(()=>_(()=>import("./CountryElement-c91a6d2f.js"),["assets/CountryElement-c91a6d2f.js","assets/index-937017e0.js","assets/index-b4607ec9.css"]));function U(s){const{countriesList:e}=s,{searchFilter:t,regionIndex:r,dropDownContent:p}=c.useContext(W),u=new RegExp(t,"i"),[n,d]=c.useState(e.filter(o=>{let l=!0;return r!=null&&o.region!=p[r]&&(l=!1),t!=""&&!u.test(o.name.common)&&(l=!1),l})),h=20,[a,f]=c.useState(n.slice(0,h)),[S,g]=c.useState(!0),w=m("div",{className:" p-12 ",children:m(x,{height:80,width:80,color:"#4fa94d",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"#4fa94d",strokeWidth:2,strokeWidthSecondary:2})},P());return c.useEffect(()=>{g(!0),d(()=>e.filter(o=>{let l=!0;return r!=null&&o.region!=p[r]&&(l=!1),t!=""&&!u.test(o.name.common)&&(l=!1),l}))},[t,r]),c.useEffect(()=>{f(n.slice(0,h))},[n]),m(C,{pageStart:0,loadMore:()=>{if(a.length===n.length)g(!1);else{const o=a.length+h>=n;f(o?a.concat(n.slice(a.length)):a.concat(n.slice(a.length,a.length+h)))}},hasMore:S,loader:w,className:"grid justify-center justify-items-center gap-5 grid-cols-countriesMap mx-auto pb-14",children:(o=>{for(var l=[],v=0;v<o.length;v++)l.push(m(k,{country:o[v]},P()));return l})(a)})}const Y=c.memo(U);export{Y as default};
